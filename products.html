<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Terminator Deals ‚Äî Hot Deals Catalog</title>
  <meta name="description" content="Hot deals from Terminator Deals ‚Äî message us on WhatsApp for any item."/>
  <style>
    :root{
      --bg:#0f1115; --card:#151822; --muted:#8b93a7; --text:#eef2ff;
      --brand:#10b981; --radius:18px; --shadow:0 6px 28px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:28px auto 60px;padding:0 16px}
    header{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--brand),#22c55e);display:grid;place-items:center;font-weight:800;color:#001510}
    h1{font-size:26px;margin:0}
    .sub{color:var(--muted);font-size:14px;margin-top:4px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-top:20px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .thumb{position:relative;aspect-ratio:4/3;overflow:hidden;background:#111826}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .badge{position:absolute;top:10px;left:10px;padding:6px 10px;border-radius:999px;background:#111827;color:#fff;font-size:12px}
    .body{padding:14px;display:flex;flex-direction:column;gap:6px}
    .title{font-size:16px;font-weight:700}
    .price{font-size:18px;color:var(--brand);font-weight:700}
    .meta{color:var(--muted);font-size:13px}
    .cta{padding:14px;margin-top:auto}
    .btn{display:block;text-align:center;padding:12px;border-radius:12px;background:linear-gradient(135deg,var(--brand),#22c55e);color:#001510;font-weight:800}
    .empty{ text-align:center;padding:40px 16px;border:1px dashed #2b3344;border-radius:16px;background:#121623; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">WT</div>
      <div>
        <h1>Terminator Deals ‚Äî Hot Deals</h1>
        <div class="sub">Message us directly on WhatsApp for any item üî•</div>
      </div>
    </header>

    <div id="grid" class="grid"></div>
  </div>

  <script>
    // --- SETTINGS ---
    const WHATSAPP = "13653784497"; // —Ç–≤–æ–π –Ω–æ–º–µ—Ä –±–µ–∑ + –∏ –ø—Ä–æ–±–µ–ª–æ–≤
    const ITEMS_URL = "items.json";  // —Ñ–∞–π–ª —Å —Ç–æ–≤–∞—Ä–∞–º–∏ —Ä—è–¥–æ–º

    // --- HELPERS ---
    const grid = document.getElementById('grid');

    function slug(s){
      return String(s).toLowerCase().trim()
        .replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
    }
    function money(n){ return `$${n}`; }

    // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä, –µ—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ç–æ
    const PLACEHOLDER = "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(
      `<svg xmlns='http://www.w3.org/2000/svg' width='640' height='480'>
         <rect fill='#151822' width='100%' height='100'/>
         <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle'
               fill='#8b93a7' font-size='24' font-family='system-ui'>No image</text>
       </svg>`);

    const imgSrc = (item) => (item.image && item.image.trim() ? item.image : PLACEHOLDER);

    // –®–∞–±–ª–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏
    function cardTemplate(item){
      const id = slug(item.title);
      const selfLink = `https://terminatordeals.ca/products.html#${id}`;
      const msg = `I'm interested in ${item.title} for ${money(item.price_now)}. Link: ${selfLink}`;
      const wa  = `https://api.whatsapp.com/send?phone=${WHATSAPP}&text=${encodeURIComponent(msg)}`;

      return `
        <article class="card" id="${id}">
          <div class="thumb">
            <img src="${imgSrc(item)}" alt="${item.title}"/>
            <span class="badge">${item.category || ''}</span>
          </div>
          <div class="body">
            <div class="title"><a href="#${id}">${item.title}</a></div>
            <div class="price">${money(item.price_now)}</div>
            <div class="meta">${item.details || ''}</div>
          </div>
          <div class="cta">
            <a class="btn" href="${wa}" target="_blank" rel="noopener">Message on WhatsApp</a>
          </div>
        </article>
      `;
    }

    // –†–µ–Ω–¥–µ—Ä / –ø—É—Å—Ç–æ–π –∫–∞—Ç–∞–ª–æ–≥
    function render(items){
      if (Array.isArray(items) && items.length){
        grid.innerHTML = items.map(cardTemplate).join('');
      } else {
        const waEmpty = `https://api.whatsapp.com/send?phone=${WHATSAPP}&text=${encodeURIComponent("Hi! I want to ask about stock and new arrivals.")}`;
        grid.innerHTML = `
          <div class="empty">
            <h2 style="margin:0 0 8px;">No items yet</h2>
            <p style="color:#8b93a7;margin:0 0 18px;">We‚Äôre updating the catalog. Message us on WhatsApp to ask about current stock.</p>
            <a href="${waEmpty}" target="_blank" rel="noopener"
               style="display:inline-block;background:#10b981;color:#001510;font-weight:700;padding:12px 20px;border-radius:10px;text-decoration:none;">
              Message on WhatsApp
            </a>
          </div>`;
      }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º items.json
    async function init(){
      try{
        const res = await fetch(ITEMS_URL, {cache: "no-store"});
        if (!res.ok) throw new Error("HTTP "+res.status);
        const items = await res.json();
        render(items);
      }catch(e){
        console.warn("Cannot load items.json:", e);
        render([]); // –ø–æ–∫–∞–∂–µ–º –ø—É—Å—Ç–æ–π –±–ª–æ–∫ –∏ –∫–Ω–æ–ø–∫—É WhatsApp
      }
    }
    init();
  </script>
</body>
</html>

